(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{11:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return h}));var r=n(99),o=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function c(t){var e;return void 0===t&&(t=null===(e=Object(r.b)().getClient())||void 0===e?void 0:e.getOptions()),!!t&&("tracesSampleRate"in t||"tracesSampler"in t)}function d(t){var e=t.match(o);if(e){var n=void 0;return"1"===e[3]?n=!0:"0"===e[3]&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}}function l(t){var e,n;return void 0===t&&(t=Object(r.b)()),null===(n=null===(e=t)||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTransaction()}function m(time){return time/1e3}function h(time){return 1e3*time}},116:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return T})),n.d(e,"a",(function(){return j}));var r=n(0),o=n(99),c=n(250),d=n(13),l=n(63),m=n(553),h=n(140),f=n(141),v=n(11);function _(){var t=this.getScope();if(t){var span=t.getSpan();if(span)return{"sentry-trace":span.toTraceparent()}}return{}}function y(t,e,n){return Object(v.c)()?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:c.a.Explicit}}),t):("function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:c.a.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:c.a.Inheritance}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:c.a.Rate,rate:Number(r)}})),function(t){if(isNaN(t)||"number"!=typeof t&&"boolean"!=typeof t)return d.a.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(t)+" of type "+JSON.stringify(typeof t)+"."),!1;if(t<0||t>1)return d.a.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+t+"."),!1;return!0}(r)?r?(t.sampled=Math.random()<r,t.sampled?(d.a.log("[Tracing] starting "+t.op+" transaction - "+t.name),t):(d.a.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),t)):(d.a.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(d.a.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var r}function O(t,e){var n,o,c=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},d=new f.a(t,this);return(d=y(d,c,Object(r.a)({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&d.initSpanRecorder(null===(o=c._experiments)||void 0===o?void 0:o.maxSpans),d}function T(t,e,n,o,c){var d,l,m=(null===(d=t.getClient())||void 0===d?void 0:d.getOptions())||{},f=new h.b(e,t,n,o);return(f=y(f,m,Object(r.a)({parentSampled:e.parentSampled,transactionContext:e},c))).sampled&&f.initSpanRecorder(null===(l=m._experiments)||void 0===l?void 0:l.maxSpans),f}function j(){var e;(e=Object(o.c)()).__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=O),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=_)),Object(l.b)()&&function(){var e=Object(o.c)();if(e.__SENTRY__){var n={mongodb:function(){return new(Object(l.a)(t,"./integrations/mongo").Mongo)},mongoose:function(){return new(Object(l.a)(t,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(Object(l.a)(t,"./integrations/mysql").Mysql)},pg:function(){return new(Object(l.a)(t,"./integrations/postgres").Postgres)}},c=Object.keys(n).filter((function(t){return!!Object(l.c)(t)})).map((function(t){try{return n[t]()}catch(t){return}})).filter((function(p){return p}));c.length>0&&(e.__SENTRY__.integrations=Object(r.e)(e.__SENTRY__.integrations||[],c))}}(),Object(m.a)()}}).call(this,n(315)(t))},117:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return h}));var r=n(0),o=n(29),c=n(144),d=n(44),l=n(28),m=function(){function t(t){void 0===t&&(t=1e3),this.spans=[],this._maxlen=t}return t.prototype.add=function(span){this.spans.length>this._maxlen?span.spanRecorder=void 0:this.spans.push(span)},t}(),h=function(){function t(t){if(this.traceId=Object(o.i)(),this.spanId=Object(o.i)().substring(16),this.startTimestamp=Object(c.d)(),this.tags={},this.data={},!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}return t.prototype.child=function(t){return this.startChild(t)},t.prototype.startChild=function(e){var n=new t(Object(r.a)(Object(r.a)({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},t.prototype.setTag=function(t,e){var n;return this.tags=Object(r.a)(Object(r.a)({},this.tags),((n={})[t]=e,n)),this},t.prototype.setData=function(t,e){var n;return this.data=Object(r.a)(Object(r.a)({},this.data),((n={})[t]=e,n)),this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setHttpStatus=function(t){this.setTag("http.status_code",String(t));var e=l.a.fromHttpCode(t);return e!==l.a.UnknownError&&this.setStatus(e),this},t.prototype.isSuccess=function(){return this.status===l.a.Ok},t.prototype.finish=function(t){this.endTimestamp="number"==typeof t?t:Object(c.d)()},t.prototype.toTraceparent=function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+t},t.prototype.toContext=function(){return Object(d.a)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},t.prototype.updateWithContext=function(t){var e,n,r,o,c;return this.data=null!=(e=t.data)?e:{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.startTimestamp=null!=(r=t.startTimestamp)?r:this.startTimestamp,this.status=t.status,this.tags=null!=(o=t.tags)?o:{},this.traceId=null!=(c=t.traceId)?c:this.traceId,this},t.prototype.getTraceContext=function(){return Object(d.a)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},t.prototype.toJSON=function(){return Object(d.a)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},t}()},140:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return v}));var r=n(0),o=n(144),c=n(13),d=n(117),l=n(28),m=n(141),h=1e3,f=function(t){function e(e,n,r,o){void 0===r&&(r="");var c=t.call(this,o)||this;return c._pushActivity=e,c._popActivity=n,c.transactionSpanId=r,c}return Object(r.b)(e,t),e.prototype.add=function(span){var e=this;span.spanId!==this.transactionSpanId&&(span.finish=function(t){span.endTimestamp="number"==typeof t?t:Object(o.d)(),e._popActivity(span.spanId)},void 0===span.endTimestamp&&this._pushActivity(span.spanId)),t.prototype.add.call(this,span)},e}(d.b),v=function(t){function e(e,n,r,o){void 0===r&&(r=h),void 0===o&&(o=!1);var d=t.call(this,e,n)||this;return d._idleHub=n,d._idleTimeout=r,d._onScope=o,d.activities={},d._heartbeatTimer=0,d._heartbeatCounter=0,d._finished=!1,d._beforeFinishCallbacks=[],n&&o&&(_(n),c.a.log("Setting idle transaction on scope. Span ID: "+d.spanId),n.configureScope((function(t){return t.setSpan(d)}))),d._initTimeout=setTimeout((function(){d._finished||d.finish()}),d._idleTimeout),d}return Object(r.b)(e,t),e.prototype.finish=function(e){var n,d,m=this;if(void 0===e&&(e=Object(o.d)()),this._finished=!0,this.activities={},this.spanRecorder){c.a.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);try{for(var h=Object(r.f)(this._beforeFinishCallbacks),f=h.next();!f.done;f=h.next()){(0,f.value)(this,e)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(d=h.return)&&d.call(h)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(span){if(span.spanId===m.spanId)return!0;span.endTimestamp||(span.endTimestamp=e,span.setStatus(l.a.Cancelled),c.a.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(span,void 0,2)));var t=span.startTimestamp<e;return t||c.a.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(span,void 0,2)),t})),c.a.log("[Tracing] flushing IdleTransaction")}else c.a.log("[Tracing] No active IdleTransaction");return this._onScope&&_(this._idleHub),t.prototype.finish.call(this,e)},e.prototype.registerBeforeFinishCallback=function(t){this._beforeFinishCallbacks.push(t)},e.prototype.initSpanRecorder=function(t){var e=this;if(!this.spanRecorder){this.spanRecorder=new f((function(t){e._finished||e._pushActivity(t)}),(function(t){e._finished||e._popActivity(t)}),this.spanId,t),c.a.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},e.prototype._pushActivity=function(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),c.a.log("[Tracing] pushActivity: "+t),this.activities[t]=!0,c.a.log("[Tracing] new activities count",Object.keys(this.activities).length)},e.prototype._popActivity=function(t){var e=this;if(this.activities[t]&&(c.a.log("[Tracing] popActivity "+t),delete this.activities[t],c.a.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,r=Object(o.d)()+n/1e3;setTimeout((function(){e._finished||e.finish(r)}),n)}},e.prototype._beat=function(){if(clearTimeout(this._heartbeatTimer),!this._finished){var t=Object.keys(this.activities),e=t.length?t.reduce((function(t,e){return t+e})):"";e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(c.a.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(l.a.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},e.prototype._pingHeartbeat=function(){var t=this;c.a.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),this._heartbeatTimer=setTimeout((function(){t._beat()}),5e3)},e}(m.a);function _(t){if(t){var e=t.getScope();if(e)e.getTransaction()&&e.setSpan(void 0)}}},141:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(0),o=n(99),c=n(17),d=n(13),l=n(44),m=n(117),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r._measurements={},r._hub=Object(o.b)(),Object(c.g)(n,o.a)&&(r._hub=n),r.name=e.name||"",r.metadata=e.metadata||{},r._trimEnd=e.trimEnd,r.transaction=r,r}return Object(r.b)(e,t),e.prototype.setName=function(t){this.name=t},e.prototype.initSpanRecorder=function(t){void 0===t&&(t=1e3),this.spanRecorder||(this.spanRecorder=new m.b(t)),this.spanRecorder.add(this)},e.prototype.setMeasurements=function(t){this._measurements=Object(r.a)({},t)},e.prototype.setMetadata=function(t){this.metadata=Object(r.a)(Object(r.a)({},this.metadata),t)},e.prototype.finish=function(e){var n=this;if(void 0===this.endTimestamp){if(this.name||(d.a.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),t.prototype.finish.call(this,e),!0===this.sampled){var r=this.spanRecorder?this.spanRecorder.spans.filter((function(s){return s!==n&&s.endTimestamp})):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var o={contexts:{trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};return Object.keys(this._measurements).length>0&&(d.a.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),d.a.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(o)}d.a.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.")}},e.prototype.toContext=function(){var e=t.prototype.toContext.call(this);return Object(l.a)(Object(r.a)(Object(r.a)({},e),{name:this.name,trimEnd:this._trimEnd}))},e.prototype.updateWithContext=function(e){var n;return t.prototype.updateWithContext.call(this,e),this.name=null!=(n=e.name)?n:"",this._trimEnd=e.trimEnd,this},e}(m.a)},28:function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t.Ok="ok",t.DeadlineExceeded="deadline_exceeded",t.Unauthenticated="unauthenticated",t.PermissionDenied="permission_denied",t.NotFound="not_found",t.ResourceExhausted="resource_exhausted",t.InvalidArgument="invalid_argument",t.Unimplemented="unimplemented",t.Unavailable="unavailable",t.InternalError="internal_error",t.UnknownError="unknown_error",t.Cancelled="cancelled",t.AlreadyExists="already_exists",t.FailedPrecondition="failed_precondition",t.Aborted="aborted",t.OutOfRange="out_of_range",t.DataLoss="data_loss"}(r||(r={})),function(t){t.fromHttpCode=function(e){if(e<400)return t.Ok;if(e>=400&&e<500)switch(e){case 401:return t.Unauthenticated;case 403:return t.PermissionDenied;case 404:return t.NotFound;case 409:return t.AlreadyExists;case 413:return t.FailedPrecondition;case 429:return t.ResourceExhausted;default:return t.InvalidArgument}if(e>=500&&e<600)switch(e){case 501:return t.Unimplemented;case 503:return t.Unavailable;case 504:return t.DeadlineExceeded;default:return t.InternalError}return t.UnknownError}}(r||(r={}))},553:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(563),o=n(13),c=n(28),d=n(11);function l(){Object(r.a)({callback:m,type:"error"}),Object(r.a)({callback:m,type:"unhandledrejection"})}function m(){var t=Object(d.b)();t&&(o.a.log("[Tracing] Transaction: "+c.a.InternalError+" -> Global error occured"),t.setStatus(c.a.InternalError))}},560:function(t,e,n){"use strict";n.d(e,"a",(function(){return $}));var r={};n.r(r),n.d(r,"Express",(function(){return B})),n.d(r,"Postgres",(function(){return W})),n.d(r,"Mysql",(function(){return J})),n.d(r,"Mongo",(function(){return Q}));var o=n(0),c=n(13),d=n(29),l=n(116),m=n(140),h=n(28),f=n(11),v=Object(d.e)();var _=n(63),time=n(144),y=n(331),O=function(t,e,n){var r;return function(o){e.value>=0&&(o||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},T=function(t,e){return{name:t,value:null!=e?e:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(8999999999999*Math.random())+1e12)}},j=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},S=function(t,e){var n=function(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},x=-1,E=function(){return x<0&&(x="hidden"===document.visibilityState?0:1/0,S((function(t){var e=t.timeStamp;x=e}),!0)),{get firstHiddenTime(){return x}}},I={},C=Object(d.e)(),k=function(){function t(){var t;this._measurements={},this._performanceCursor=0,!Object(_.b)()&&(null===(t=C)||void 0===t?void 0:t.performance)&&(C.performance.mark&&C.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(),this._trackFID())}return t.prototype.addPerformanceEntries=function(t){var e=this;if(C&&C.performance&&C.performance.getEntries&&time.a){c.a.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,o,d,l,m=Object(f.d)(time.a);if(C.document&&C.document.scripts)for(var i=0;i<C.document.scripts.length;i++)if("true"===C.document.scripts[i].dataset.entry){n=C.document.scripts[i].src;break}if(C.performance.getEntries().slice(this._performanceCursor).forEach((function(h){var v=Object(f.d)(h.startTime),_=Object(f.d)(h.duration);if(!("navigation"===t.op&&m+v<t.startTimestamp))switch(h.entryType){case"navigation":!function(t,e,n){w({transaction:t,entry:e,event:"unloadEvent",timeOrigin:n}),w({transaction:t,entry:e,event:"redirect",timeOrigin:n}),w({transaction:t,entry:e,event:"domContentLoadedEvent",timeOrigin:n}),w({transaction:t,entry:e,event:"loadEvent",timeOrigin:n}),w({transaction:t,entry:e,event:"connect",timeOrigin:n}),w({transaction:t,entry:e,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),w({transaction:t,entry:e,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),w({transaction:t,entry:e,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(t,e,n){R(t,{op:"browser",description:"request",startTimestamp:n+Object(f.d)(e.requestStart),endTimestamp:n+Object(f.d)(e.responseEnd)}),R(t,{op:"browser",description:"response",startTimestamp:n+Object(f.d)(e.responseStart),endTimestamp:n+Object(f.d)(e.responseEnd)})}(t,e,n)}(t,h,m),d=m+Object(f.d)(h.responseStart),l=m+Object(f.d)(h.requestStart);break;case"mark":case"paint":case"measure":var y=function(t,e,n,r,o){var c=o+n,d=c+r;return R(t,{description:e.name,endTimestamp:d,op:e.entryType,startTimestamp:c}),c}(t,h,v,_,m);void 0===o&&"sentry-tracing-init"===h.name&&(o=y);var O=E(),T=h.startTime<O.firstHiddenTime;"first-paint"===h.name&&T&&(c.a.log("[Measurements] Adding FP"),e._measurements.fp={value:h.startTime},e._measurements["mark.fp"]={value:y}),"first-contentful-paint"===h.name&&T&&(c.a.log("[Measurements] Adding FCP"),e._measurements.fcp={value:h.startTime},e._measurements["mark.fcp"]={value:y});break;case"resource":var j=h.name.replace(window.location.origin,""),S=function(t,e,n,r,o,c){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var data={};"transferSize"in e&&(data["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(data["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(data["Decoded Body Size"]=e.decodedBodySize);var d=c+r,l=d+o;return R(t,{description:n,endTimestamp:l,op:e.initiatorType?"resource."+e.initiatorType:"resource",startTimestamp:d,data:data}),l}(t,h,j,v,_,m);void 0===r&&(n||"").indexOf(j)>-1&&(r=S)}})),void 0!==r&&void 0!==o&&R(t,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:r}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(t),"pageload"===t.op){var h=Object(f.d)(time.a);"number"==typeof d&&(c.a.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(d-t.startTimestamp)},"number"==typeof l&&l<=d&&(this._measurements["ttfb.requestTime"]={value:1e3*(d-l)})),["fcp","fp","lcp"].forEach((function(n){if(e._measurements[n]&&!(h>=t.startTimestamp)){var r=e._measurements[n].value,o=h+Object(f.d)(r),d=Math.abs(1e3*(o-t.startTimestamp)),l=d-r;c.a.log("[Measurements] Normalized "+n+" from "+r+" to "+d+" ("+l+")"),e._measurements[n].value=d}})),this._measurements["mark.fid"]&&this._measurements.fid&&R(t,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+Object(f.d)(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,t.setMeasurements(this._measurements),this._tagMetricInfo(t)}}},t.prototype._tagMetricInfo=function(t){this._lcpEntry&&(c.a.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&t.setTag("lcp.element",Object(y.a)(this._lcpEntry.element)),this._lcpEntry.id&&t.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&t.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),t.setTag("lcp.size",this._lcpEntry.size)),this._clsEntry&&this._clsEntry.sources&&(c.a.log("[Measurements] Adding CLS Data"),this._clsEntry.sources.forEach((function(source,e){return t.setTag("cls.source."+(e+1),Object(y.a)(source.node))})))},t.prototype._trackCLS=function(){var t,e,n,r,o,d,l,m,h=this;t=function(t){var e=t.entries.pop();e&&(c.a.log("[Measurements] Adding CLS"),h._measurements.cls={value:t.value},h._clsEntry=e)},r=T("CLS",0),o=0,d=[],(m=j("layout-shift",l=function(t){if(t&&!t.hadRecentInput){var e=d[0],c=d[d.length-1];o&&0!==d.length&&t.startTime-c.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,d.push(t)):(o=t.value,d=[t]),o>r.value&&(r.value=o,r.entries=d,n&&n())}}))&&(n=O(t,r,e),S((function(){m.takeRecords().map(l),n(!0)})))},t.prototype._trackNavigator=function(t){var e=C.navigator;if(e){var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),A(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),A(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),A(e.deviceMemory)&&t.setTag("deviceMemory",String(e.deviceMemory)),A(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}},t.prototype._trackLCP=function(){var t=this;!function(t,e){var n,r=E(),o=T("LCP"),c=function(t){var e=t.startTime;e<r.firstHiddenTime&&(o.value=e,o.entries.push(t)),n&&n()},d=j("largest-contentful-paint",c);if(d){n=O(t,o,e);var l=function(){I[o.id]||(d.takeRecords().map(c),d.disconnect(),I[o.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,l,{once:!0,capture:!0})})),S(l,!0)}}((function(e){var n=e.entries.pop();if(n){var r=Object(f.d)(time.a),o=Object(f.d)(n.startTime);c.a.log("[Measurements] Adding LCP"),t._measurements.lcp={value:e.value},t._measurements["mark.lcp"]={value:r+o},t._lcpEntry=n}}))},t.prototype._trackFID=function(){var t,e,n,r,o,d,l,m=this;t=function(t){var e=t.entries.pop();if(e){var n=Object(f.d)(time.a),r=Object(f.d)(e.startTime);c.a.log("[Measurements] Adding FID"),m._measurements.fid={value:t.value},m._measurements["mark.fid"]={value:n+r}}},r=E(),o=T("FID"),(l=j("first-input",d=function(t){n&&t.startTime<r.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),n(!0))}))&&(n=O(t,o,e),S((function(){l.takeRecords().map(d),l.disconnect()}),!0))},t}();function w(t){var e=t.transaction,n=t.entry,r=t.event,o=t.timeOrigin,c=t.eventEnd,d=t.description,l=c?n[c]:n[r+"End"],m=n[r+"Start"];m&&l&&R(e,{op:"browser",description:null!=d?d:r,startTimestamp:o+Object(f.d)(m),endTimestamp:o+Object(f.d)(l)})}function R(t,e){var n=e.startTimestamp,r=Object(o.d)(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(Object(o.a)({startTimestamp:n},r))}function A(t){return"number"==typeof t&&isFinite(t)}var M=n(119),D=n(563),N=n(17),H={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function F(t){var e=Object(o.a)(Object(o.a)({},H),t),n=e.traceFetch,r=e.traceXHR,c=e.tracingOrigins,d=e.shouldCreateSpanForRequest,l={},m=function(t){if(l[t])return l[t];var e=c;return l[t]=e.some((function(e){return Object(M.a)(t,e)}))&&!Object(M.a)(t,"sentry_key"),l[t]},v=m;"function"==typeof d&&(v=function(t){return m(t)&&d(t)});var _={};n&&Object(D.a)({callback:function(t){!function(t,e,n){if(!Object(f.c)()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp&&t.fetchData.__span){return void((span=n[t.fetchData.__span])&&(t.response?span.setHttpStatus(t.response.status):t.error&&span.setStatus(h.a.InternalError),span.finish(),delete n[t.fetchData.__span]))}var r=Object(f.b)();if(r){var span=r.startChild({data:Object(o.a)(Object(o.a)({},t.fetchData),{type:"fetch"}),description:t.fetchData.method+" "+t.fetchData.url,op:"http.client"});t.fetchData.__span=span.spanId,n[span.spanId]=span;var c=t.args[0]=t.args[0],d=t.args[1]=t.args[1]||{},l=d.headers;Object(N.g)(c,Request)&&(l=c.headers),l?"function"==typeof l.append?l.append("sentry-trace",span.toTraceparent()):l=Array.isArray(l)?Object(o.e)(l,[["sentry-trace",span.toTraceparent()]]):Object(o.a)(Object(o.a)({},l),{"sentry-trace":span.toTraceparent()}):l={"sentry-trace":span.toTraceparent()},d.headers=l}}(t,v,_)},type:"fetch"}),r&&Object(D.a)({callback:function(t){!function(t,e,n){var r,c;if(!Object(f.c)()||(null===(r=t.xhr)||void 0===r?void 0:r.__sentry_own_request__)||!(null===(c=t.xhr)||void 0===c?void 0:c.__sentry_xhr__)||!e(t.xhr.__sentry_xhr__.url))return;var d=t.xhr.__sentry_xhr__;if(t.endTimestamp&&t.xhr.__sentry_xhr_span_id__){return void((span=n[t.xhr.__sentry_xhr_span_id__])&&(span.setHttpStatus(d.status_code),span.finish(),delete n[t.xhr.__sentry_xhr_span_id__]))}var l=Object(f.b)();if(l){var span=l.startChild({data:Object(o.a)(Object(o.a)({},d.data),{type:"xhr",method:d.method,url:d.url}),description:d.method+" "+d.url,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=span.spanId,n[t.xhr.__sentry_xhr_span_id__]=span,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",span.toTraceparent())}catch(t){}}}(t,v,_)},type:"xhr"})}var L=Object(d.e)();var P=Object(o.a)({idleTimeout:m.a,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),L&&L.location){var r,o=L.location.href;e&&(r=t({name:L.location.pathname,op:"pageload"})),n&&Object(D.a)({callback:function(e){var n=e.to,d=e.from;void 0===d&&o&&-1!==o.indexOf(n)?o=void 0:d!==n&&(o=void 0,r&&(c.a.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=t({name:L.location.pathname,op:"navigation"}))},type:"history"})}else c.a.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},H),z=function(){function t(e){this.name=t.id,this._metrics=new k,this._emitOptionsWarning=!1;var n=H.tracingOrigins;e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&0!==e.tracingOrigins.length?n=e.tracingOrigins:this._emitOptionsWarning=!0,this.options=Object(o.a)(Object(o.a)(Object(o.a)({},P),e),{tracingOrigins:n})}return t.prototype.setupOnce=function(t,e){var n=this;this._getCurrentHub=e,this._emitOptionsWarning&&(c.a.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),c.a.warn("[Tracing] We added a reasonable default for you: "+H.tracingOrigins));var r=this.options,o=r.routingInstrumentation,d=r.startTransactionOnLocationChange,l=r.startTransactionOnPageLoad,m=r.markBackgroundTransactions,_=r.traceFetch,y=r.traceXHR,O=r.tracingOrigins,T=r.shouldCreateSpanForRequest;o((function(t){return n._createRouteTransaction(t)}),l,d),m&&(v&&v.document?v.document.addEventListener("visibilitychange",(function(){var t=Object(f.b)();v.document.hidden&&t&&(c.a.log("[Tracing] Transaction: "+h.a.Cancelled+" -> since tab moved to the background, op: "+t.op),t.status||t.setStatus(h.a.Cancelled),t.setTag("visibilitychange","document.hidden"),t.finish())})):c.a.warn("[Tracing] Could not set up background tab detection due to lack of global document")),F({traceFetch:_,traceXHR:y,tracingOrigins:O,shouldCreateSpanForRequest:T})},t.prototype._createRouteTransaction=function(t){var e=this;if(this._getCurrentHub){var n=this.options,r=n.beforeNavigate,m=n.idleTimeout,v=n.maxTransactionDuration,_="pageload"===t.op?function(){var header=(t="sentry-trace",e=document.querySelector("meta[name="+t+"]"),e?e.getAttribute("content"):null);var t,e;if(header)return Object(f.a)(header);return}():void 0,y=Object(o.a)(Object(o.a)(Object(o.a)({},t),_),{trimEnd:!0}),O="function"==typeof r?r(y):y,T=void 0===O?Object(o.a)(Object(o.a)({},y),{sampled:!1}):O;!1===T.sampled&&c.a.log("[Tracing] Will not send "+T.op+" transaction because of beforeNavigate."),c.a.log("[Tracing] Starting "+T.op+" transaction on scope");var j=this._getCurrentHub(),S=Object(d.e)().location,x=Object(l.b)(j,T,m,!0,{location:S});return x.registerBeforeFinishCallback((function(t,n){e._metrics.addPerformanceEntries(t),function(t,e,n){var r=n-e.startTimestamp;n&&(r>t||r<0)&&(e.setStatus(h.a.DeadlineExceeded),e.setTag("maxTransactionDurationExceeded","true"))}(Object(f.e)(v),t,n)})),x}c.a.warn("[Tracing] Did not create "+t.op+" transaction because _getCurrentHub is invalid.")},t.id="BrowserTracing",t}();var B=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return t.prototype.setupOnce=function(){this._router?function(t,e){void 0===e&&(e=[]);e.forEach((function(e){return function(t,e){var n=t[e];return t[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return n.call.apply(n,Object(o.e)([this],Y(t,e)))},t}(t,e)}))}(this._router,this._methods):c.a.error("ExpressIntegration is missing an Express instance")},t.id="Express",t}();function U(t,e){var n=t.length;switch(n){case 2:return function(n,r){var o=r.__sentry_transaction;if(o){var c=o.startChild({description:t.name,op:"middleware."+e});r.once("finish",(function(){c.finish()}))}return t.call(this,n,r)};case 3:return function(n,r,c){var d,span=null===(d=r.__sentry_transaction)||void 0===d?void 0:d.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=span)||void 0===t||t.finish(),c.call.apply(c,Object(o.e)([this],e))}))};case 4:return function(n,r,c,d){var l,span=null===(l=c.__sentry_transaction)||void 0===l?void 0:l.startChild({description:t.name,op:"middleware."+e});t.call(this,n,r,c,(function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];null===(t=span)||void 0===t||t.finish(),d.call.apply(d,Object(o.e)([this],e))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function Y(t,e){return t.map((function(t){return"function"==typeof t?U(t,e):Array.isArray(t)?t.map((function(a){return"function"==typeof a?U(a,e):a})):t}))}var object=n(44),W=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=Object(_.c)("pg");n?Object(object.c)(n.Client.prototype,"query",(function(t){return function(n,r,o){var c,d,l,span=null===(d=null===(c=e().getScope())||void 0===c?void 0:c.getSpan())||void 0===d?void 0:d.startChild({description:"string"==typeof n?n:n.text,op:"db"});if("function"==typeof o)return t.call(this,n,r,(function(t,e){var n;null===(n=span)||void 0===n||n.finish(),o(t,e)}));if("function"==typeof r)return t.call(this,n,(function(t,e){var n;null===(n=span)||void 0===n||n.finish(),r(t,e)}));var m=void 0!==r?t.call(this,n,r):t.call(this,n);return Object(N.m)(m)?m.then((function(t){var e;return null===(e=span)||void 0===e||e.finish(),t})):(null===(l=span)||void 0===l||l.finish(),m)}})):c.a.error("Postgres Integration was unable to require `pg` package.")},t.id="Postgres",t}(),J=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(t,e){var n=Object(_.c)("mysql/lib/Connection.js");n?Object(object.c)(n,"createQuery",(function(t){return function(n,r,o){var c,d,span=null===(d=null===(c=e().getScope())||void 0===c?void 0:c.getSpan())||void 0===d?void 0:d.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof o?t.call(this,n,r,(function(t,e,n){var r;null===(r=span)||void 0===r||r.finish(),o(t,e,n)})):"function"==typeof r?t.call(this,n,(function(t,e,n){var o;null===(o=span)||void 0===o||o.finish(),r(t,e,n)})):t.call(this,n,r,o)}})):c.a.error("Mysql Integration was unable to require `mysql` package.")},t.id="Mysql",t}(),G=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],X={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},Q=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._operations=Array.isArray(e.operations)?e.operations:G,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}return t.prototype.setupOnce=function(t,e){var n=this._useMongoose?"mongoose":"mongodb",r=Object(_.c)(n);r?this._instrumentOperations(r.Collection,this._operations,e):c.a.error("Mongo Integration was unable to require `"+n+"` package.")},t.prototype._instrumentOperations=function(t,e,n){var r=this;e.forEach((function(e){return r._patchOperation(t,e,n)}))},t.prototype._patchOperation=function(t,e,n){if(e in t.prototype){var r=this._getSpanContextFromOperationArguments.bind(this);Object(object.c)(t.prototype,e,(function(t){return function(){for(var c,d,l,m,h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];var v=h[h.length-1],_=n().getScope(),y=null===(c=_)||void 0===c?void 0:c.getSpan();if("function"!=typeof v||"mapReduce"===e&&2===h.length){var O=null===(d=y)||void 0===d?void 0:d.startChild(r(this,e,h)),T=t.call.apply(t,Object(o.e)([this],h));return Object(N.m)(T)?T.then((function(t){var e;return null===(e=O)||void 0===e||e.finish(),t})):(null===(l=O)||void 0===l||l.finish(),T)}var span=null===(m=y)||void 0===m?void 0:m.startChild(r(this,e,h.slice(0,-1)));return t.call.apply(t,Object(o.e)([this],h.slice(0,-1),[function(t,e){var n;null===(n=span)||void 0===n||n.finish(),v(t,e)}]))}}))}},t.prototype._getSpanContextFromOperationArguments=function(t,e,n){var data={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},r={op:"db",description:e,data:data},c=X[e],d=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!c||!d)return r;try{if("mapReduce"===e){var l=Object(o.c)(n,2),map=l[0],m=l[1];data[c[0]]="string"==typeof map?map:map.name||"<anonymous>",data[c[1]]="string"==typeof m?m:m.name||"<anonymous>"}else for(var i=0;i<c.length;i++)data[c[i]]=JSON.stringify(n[i])}catch(t){}return r},t.id="Mongo",t}(),$=Object(o.a)(Object(o.a)({},r),{BrowserTracing:z});Object(l.a)()}}]);