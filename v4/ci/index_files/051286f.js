(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1101:function(t,e,r){t.exports={search:"search_olqnN"}},1228:function(t,e,r){},1296:function(t,e,r){"use strict";var n=r(1101),o=r.n(n);r.d(e,"default",(function(){return o.a}))},1297:function(t,e,r){"use strict";r(1228)},1430:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(30),r(883)),c=r.n(o),l=r(342),f={components:{DefaultAvatar:r(343).a},props:{project:{type:Object,required:!0}}},m=r(6),h={components:{Item:Object(m.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ElCard",{staticClass:"border-0",attrs:{"body-style":"padding: 0px"}},[r("div",{staticClass:"flex items-stretch px-4 py-6"},[r("div",{staticClass:"flex items-center w-2/6"},[t.project.project_avatar?r("ElAvatar",{staticClass:"mr-3 h-8 w-8",attrs:{slot:"icon",src:t.project.project_avatar,size:30},slot:"icon"},[r("span",{staticClass:"text-lg rounded-full h-8 flex items-center justify-center default-avatar"},[t._v("\n                    "+t._s(t.project.name.slice(0,1).toUpperCase())+"\n                ")])]):r("DefaultAvatar",{staticClass:"mr-3 h-8 w-8 rounded-full flex items-center justify-center",attrs:{slot:"icon",name:t.project.name},slot:"icon"}),t._v(" "),r("div",{staticClass:"flex items-center w-full flex-1"},[r("div",{staticClass:"flex flex-col flex-1"},[r("nuxt-link",{attrs:{to:"projects/"+t.project.slug}},[r("span",{staticClass:"text-xl hover:text-blue-700"},[t._v(t._s(t.project.name))])]),t._v(" "),t.project.url?r("a",{staticClass:"text-xs italic  hover:text-blue-700",attrs:{href:t.project.url,target:"_blank"}},[t._v("\n                        "+t._s(t.project.url)+"\n                    ")]):t._e()],1)])],1),t._v(" "),r("div",{staticClass:"flex items-start w-4/6 flex-1"},[r("nuxt-link",{attrs:{to:"projects/"+t.project.slug}},[r("div",{staticClass:"flex flex-col flex-1"},[r("span",{staticClass:"text-sm"},[t._v(t._s(t.project.description))])])])],1)])])}),[],!1,null,null,null).exports},props:{projects:{type:Array,required:!0}}},v=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"my-5"},t._l(t.projects,(function(t){return r("li",{key:t.id,staticClass:"mb-5"},[r("Item",{attrs:{project:t}})],1)})),0)}),[],!1,null,null,null).exports,d=(r(177),{mixins:[r(954).a],data:function(){return{search:this.$route.query.search}}}),j=r(1296);var x=Object(m.a)(d,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ElInput",{class:t.$style.search,attrs:{size:"medium",placeholder:"Search","suffix-icon":"el-icon-search",clearable:""},on:{clear:function(e){return t.filter("search")}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filter("search")}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})}),[],!1,(function(t){this.$style=j.default.locals||j.default}),null,null).exports,_=r(944),y=r(991),w=(r(48),r(950)),C=r(59),O={mixins:[Object(w.a)((function(){return{name:"",description:"",project_avatar:"",url:"",repositories:[]}}))],props:{save:{type:Function,required:!0},userRepositories:{type:Array,required:!0}},data:function(){return{loading:!1,options:[],repositories:[]}},computed:{formRules:function(){return{name:"required",description:"required",project_avatar:"type:url",url:[{pattern:/(https:\/\/rubato\.sun-asterisk\.vn\/projects)\/(\d+)/,message:"Please enter a valid Rubato url"}],repositories:[{required:!this.form.url,message:"Repositories is required"}]}}},created:function(){this.options=this.userRepositories},methods:{searchRepositories:function(t){var e=this;t?(this.loading=!0,setTimeout((function(){e.loading=!1,Object(C.h)({search:t}).then((function(t){var data=t.data.data;e.options=data})).catch((function(){e.$message.error("Something went wrong, please try again later")})).finally((function(){e.loading=!1}))}),500)):this.options=[]}}},E=(r(1297),{components:{ProjectForm:Object(m.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ElDialog",{attrs:{visible:t.show,title:"New project"},on:{"update:visible":function(e){t.show=e},close:function(e){return t.clear(t.$refs.form)}}},[r("ElForm",{ref:"form",attrs:{model:t.form,rules:t.formRules,"validate-on-rule-change":!1}},[r("ElFormItem",{attrs:{prop:"name",error:t.serverErrors.name}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-red-700 mr-1"},[t._v("*")]),t._v(" "),r("span",{staticClass:"text-gray-700"},[t._v("Name")]),t._v(" "),r("Ionicon",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"text-gray-600 ml-1 cursor-pointer",attrs:{title:"This field contains the name of the project",name:"help-circle"}})],1),t._v(" "),r("ElInput",{attrs:{name:"name",placeholder:"Enter Project Name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("ElFormItem",{attrs:{prop:"description",error:t.serverErrors.description}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-red-700 mr-1"},[t._v("*")]),t._v(" "),r("span",{staticClass:"text-gray-700"},[t._v("Description")]),t._v(" "),r("Ionicon",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"text-gray-600 ml-1 cursor-pointer",attrs:{title:"This field contains the description of the project",name:"help-circle"}})],1),t._v(" "),r("ElInput",{attrs:{type:"textarea",autosize:"",name:"description",placeholder:"Enter Project Description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("ElFormItem",{attrs:{prop:"project_avatar",error:t.serverErrors.project_avatar}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-gray-700"},[t._v("Project Avatar")]),t._v(" "),r("Ionicon",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"text-gray-600 ml-1 cursor-pointer",attrs:{title:"This field contains the URL of the project avatar",name:"help-circle"}})],1),t._v(" "),r("ElInput",{attrs:{name:"project_avatar",placeholder:"Enter Project Avatar URL"},model:{value:t.form.project_avatar,callback:function(e){t.$set(t.form,"project_avatar",e)},expression:"form.project_avatar"}})],1),t._v(" "),r("ElFormItem",{attrs:{prop:"url",error:t.serverErrors.url}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-gray-700"},[t._v("Rubato Project URL")]),t._v(" "),r("Ionicon",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"text-gray-600 ml-1 cursor-pointer",attrs:{title:"This field contains the URL of the Rubato project",name:"help-circle"}})],1),t._v(" "),r("ElInput",{attrs:{name:"url",placeholder:"Enter Rubato Project URL"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),r("ElFormItem",{attrs:{prop:"repositories",error:t.serverErrors.repositories}},[r("div",{staticClass:"flex items-center"},[r("span",{staticClass:"text-red-700 mr-1"},[t._v("*")]),t._v(" "),r("span",{staticClass:"text-gray-700"},[t._v("Repositories")]),t._v(" "),r("Ionicon",{directives:[{name:"tooltip",rawName:"v-tooltip"}],staticClass:"text-gray-600 ml-1 cursor-pointer",attrs:{title:"This field contains the list of repositories that you want to assign to the project",name:"help-circle"}})],1),t._v(" "),r("ElSelect",{staticClass:"w-1/2",attrs:{name:"repositories",placeholder:"Select the repositories you want to assign","value-key":"id",multiple:"",filterable:"",remote:"","reserve-keyword":"",loading:t.loading,"remote-method":t.searchRepositories},model:{value:t.form.repositories,callback:function(e){t.$set(t.form,"repositories",e)},expression:"form.repositories"}},t._l(t.options,(function(t){return r("ElOption",{key:t.id,attrs:{label:t.path,value:t.id}})})),1)],1)],1),t._v(" "),r("div",{staticClass:"text-right"},[r("ElButton",{attrs:{loading:t.processing,type:"primary"},on:{click:function(e){return t.submit(t.$refs.form,t.save)}}},[t._v("\n            Save\n        ")]),t._v(" "),r("ElButton",{attrs:{disabled:t.processing},on:{click:t.close}},[t._v("\n            Cancel\n        ")])],1)],1)}),[],!1,null,null,null).exports,Pagination:_.a,ProjectList:v,ProjectFilter:x,Alert:y.a},inject:["setLinks"],asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,e.next=3,Object(l.e)(r);case 3:return n=e.sent,e.next=6,Object(C.h)();case 6:return o=e.sent,c=o.data.data,e.abrupt("return",{projects:n.data.data,pagination:n.data.meta,userRepositories:c});case 9:case"end":return e.stop()}}),e)})))()},data:function(){return{title:"Projects"}},head:function(){return{title:this.title}},computed:{links:function(){return[{icon:"folder",text:"Projects",to:this.$route.query.path}]}},watch:{"$route.query":function(){this.setLinks(this.links)}},watchQuery:!0,created:function(){this.setLinks(this.links)},mounted:function(){this.$gtag.pageview({page_title:this.title,page_path:this.$route.path,page_location:window.location.href})},methods:{save:function(data){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return data.url||delete data.url,data.project_avatar||delete data.project_avatar,e.next=4,Object(l.h)(data).then((function(e){var r=e.data.data;t.projects=c()(r,t.projects)}));case 4:t.$refs.form.close();case 5:case"end":return e.stop()}}),e)})))()}}}),k=Object(m.a)(E,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"py-6 px-10 bg-white min-h-screen"},[r("div",{staticClass:"my-5 flex items-center justify-between"},[r("ElButton",{on:{click:function(){return t.$refs.form.open()}}},[r("span",{staticClass:"flex items-center text-base text-black font-thin"},[r("Ionicon",{staticClass:"mr-2",attrs:{name:"duplicate"}}),t._v(" "),r("p",[t._v("Add project")])],1)]),t._v(" "),r("div",{staticClass:"text-right w-1/2"},[r("ProjectFilter")],1)],1),t._v(" "),r("ProjectForm",{ref:"form",attrs:{"user-repositories":t.userRepositories,save:t.save}}),t._v(" "),t.projects.length?r("div",[r("ProjectList",{attrs:{projects:t.projects}}),t._v(" "),r("Pagination",{attrs:{data:t.pagination}})],1):r("div",[r("Alert",{attrs:{title:"You don't have any projects with repositories yet!"}},[r("span",{staticClass:"cursor-pointer text-blue-700",on:{click:function(){return t.$refs.form.open()}}},[t._v("\n                Click here to create a project.\n            ")])])],1)],1)}),[],!1,null,null,null);e.default=k.exports},944:function(t,e,r){"use strict";var n=r(12),o=r(564),c=r.n(o),l=r(873),f=r.n(l),m={props:{data:{type:Object,required:!0},pageParam:{type:String,default:"page"},hashParam:{type:String,default:null}},methods:{go:function(t){this.$router.push(this.to(t))},to:function(t){var e,path=this.$route.path,r=null!==(e=this.hashParam)&&void 0!==e?e:this.$route.hash,o=c()(this.$route.query,[this.pageParam]);return{path:path,query:1!==t?f()({},o,Object(n.a)({},this.pageParam,t)):o,hash:r}}}},h=r(6),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("ElPagination",{staticClass:"text-center my-4",attrs:{"current-page":t.data.current_page,"page-count":t.data.last_page,layout:"prev, pager, next",background:"","hide-on-single-page":""},on:{"current-change":t.go}})}),[],!1,null,null,null);e.a=component.exports},950:function(t,e,r){"use strict";var n=r(566),o=r.n(n),c=r(953);e.a=function(t){return{mixins:[c.a],data:function(){return{show:!1,editing:null,form:t()}},watch:{editing:function(e){this.form=e?o()(e):t()}},methods:{open:function(t){this.editing=t,this.show=!0},close:function(){this.show=!1},clear:function(form){var e=this;this.editing=null,this.form=t(),this.$nextTick((function(){e.clearError(form)}))}}}}},953:function(t,e,r){"use strict";var n=r(7),o=r(12),c=r(45),l=r(337),f=r(339),m=r(176),h=r(338);r(30),r(146),r(175),r(174),r(565),r(22),r(73),r(57),r(31),r(20),r(34),r(35);var v=r(23),d=r.n(v),j=r(875),x=r.n(j),_=r(145),y=r.n(_),w=r(877),C=r.n(w),O=r(878),E=r.n(O),k=r(879),$=r.n(k);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I={required:"{field} is required",type:"{field} must be a valid {value}",pattern:"{field} must match the pattern {value}",min:"{field} must be at least {value} charaters",max:"{field} must not be longer than {value} characters",length:"{field} must be {value} characters",enum:"{field} must be a value in {value}"};function F(t){if("string"!=typeof t)return t;if("true"===t)return!0;if("false"===t)return!1;if(/,/.test(t))return t.split(",");var e=Number(t);return Number.isNaN(e)?t:e}function N(t){if(!1!==t){if(!t.response)throw t;var e;419===t.response.status?this.$message.error("Your session has expired, try reloading the page"):422===t.response.status?this.serverErrors=(e=t.response.data.errors,x()(e,"0")):t.response.data.message?this.$message.error(t.response.data.message):this.$message.error("Something went wrong, please try again later")}}e.a={data:function(){return{processing:!1,serverErrors:{},rules:[]}},computed:{formRules:function(){return x()(this.rules,(function(t,e){if("string"!=typeof t)return t;var r=e;return t.split("|").map((function(t){var e,n,v=t.split(";"),j=(n=v,Object(l.a)(n)||Object(f.a)(n)||Object(m.a)(n)||Object(h.a)()),main=j[0],x=j.slice(1),_=main.split(":"),w=Object(c.a)(_,2),O=w[0],k=w[1],P=F(void 0===k||k);if("name"===O)return r=P,null;var N=x.reduce((function(t,e){var r=e.split(":"),n=Object(c.a)(r,2),l=n[0],f=n[1];return R(R({},t),{},Object(o.a)({},l,F(f)))}),{});return R((e={},Object(o.a)(e,O,P),Object(o.a)(e,"message",function(t,e){var r=e.field,n=e.value,o=d()(I,t).replace("{field}",r).replace("{value}",n);return y()(C.a,E.a,$.a)(o)}(O,{field:r,value:P,extras:N})),e),N)})).filter(Boolean)}))}},methods:{submit:function(form,t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.serverErrors={},r.prev=1,e.processing=!0,!form.model){r.next=6;break}return r.next=6,form.validate();case 6:return r.next=8,t(form.model);case 8:n=r.sent,e.$emit("saved",n?n.data:null),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),N.call(e,r.t0);case 15:return r.prev=15,e.processing=!1,r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,12,15,18]])})))()},clearError:function(form){form&&form.clearValidate(),this.serverErrors={}},resetForm:function(form){form&&form.resetFields()}}}},954:function(t,e,r){"use strict";var n=r(145),o=r.n(n),c=r(874),l=r.n(c),f=r(876),m=r.n(f);e.a={methods:{filter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this[t],path=this.$route.path,c=null!=r?r:this.$route.hash,f=n?m()(t,n):l()(t),h=o()(f,l()(e))(this.$route.query);this.$router.push({path:path,query:h,hash:c})}}}},991:function(t,e,r){"use strict";var n={props:{title:{type:String}}},o=r(6),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ElAlert",{staticClass:"my-4 flex items-center",attrs:{title:t.title,type:"info","show-icon":"",closable:!1,size:"sm"}},[t._t("default")],2)],1)}),[],!1,null,null,null);e.a=component.exports}}]);